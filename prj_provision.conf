# Provisioning-only build overlay -----------------------------------------
#
# Goal: keep just enough functionality alive (watchdog + UART CLI) to push
# per-device Curve25519 material via the `prov curve …` command without
# blowing the 8 KB SRAM budget. Production builds must continue to use the
# default `prj.conf` without this overlay once provisioning is done.

# Tell the code that we're in provisioning mode (skip HTS221 thread, etc.)
CONFIG_APP_PROVISION_BUILD=y

# Enable the lightweight buffers that the GDB provisioning script pokes.
CONFIG_APP_PROVISION_GDB_HELPERS=y

# Force the UART CLI on – this thread drives the provisioning command.
CONFIG_APP_ENABLE_UART_COMMANDS=y

# Upsize the CLI stack / buffers and reclaim SRAM elsewhere.
CONFIG_MAIN_STACK_SIZE=1856
CONFIG_ISR_STACK_SIZE=640
CONFIG_IDLE_STACK_SIZE=192
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=960
CONFIG_APP_SUPERVISOR_THREAD_STACK_SIZE=832
CONFIG_APP_RECOVERY_THREAD_STACK_SIZE=448
CONFIG_APP_PROVISION_CMD_BUFFER=768
CONFIG_APP_PROVISION_CMD_STACK=1408

# Thread metadata is nice in production, but we disable it here to save RAM.
CONFIG_THREAD_MONITOR=n

# Logging stays enabled (we need CLI feedback), keep info-level banners visible.
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_APP_CURVE25519_STATIC_SECRET_HEX="f0ed94212d52773938064558aab7d53fcf56f1680399281f9996dc2b7cfe284f"
CONFIG_APP_CURVE25519_STATIC_PEER_PUB_HEX="3dbced551515fba03d03007dd069a7331187bd5ec83db25d4c70c8412a783dd3"
